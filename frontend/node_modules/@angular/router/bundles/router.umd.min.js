!function(global,factory){if("function"==typeof define&&define.amd)define("@angular/router",["exports","@angular/common","@angular/core","rxjs/BehaviorSubject","rxjs/Subject","rxjs/observable/from","rxjs/observable/of","rxjs/operator/concatMap","rxjs/operator/every","rxjs/operator/first","rxjs/operator/map","rxjs/operator/mergeMap","rxjs/operator/reduce","rxjs/Observable","rxjs/operator/catch","rxjs/operator/concatAll","rxjs/util/EmptyError","rxjs/observable/fromPromise","rxjs/operator/last","rxjs/operator/mergeAll","@angular/platform-browser","rxjs/operator/filter"],factory);else if("undefined"!=typeof exports)factory(exports,require("@angular/common"),require("@angular/core"),require("rxjs/BehaviorSubject"),require("rxjs/Subject"),require("rxjs/observable/from"),require("rxjs/observable/of"),require("rxjs/operator/concatMap"),require("rxjs/operator/every"),require("rxjs/operator/first"),require("rxjs/operator/map"),require("rxjs/operator/mergeMap"),require("rxjs/operator/reduce"),require("rxjs/Observable"),require("rxjs/operator/catch"),require("rxjs/operator/concatAll"),require("rxjs/util/EmptyError"),require("rxjs/observable/fromPromise"),require("rxjs/operator/last"),require("rxjs/operator/mergeAll"),require("@angular/platform-browser"),require("rxjs/operator/filter"));else{var mod={exports:{}};factory(mod.exports,global.ng.common,global.ng.core,global.Rx,global.Rx,global.Rx.Observable,global.Rx.Observable,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx,global.Rx.Observable,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.ng.platformBrowser,global.Rx.Observable.prototype),global.ng=global.ng||{},global.ng.router=mod.exports}}(this,function(exports,_common,_core,_BehaviorSubject,_Subject,_from,_of,_concatMap,_every,_first,_map,_mergeMap,_reduce,_Observable,_catch2,_concatAll,_EmptyError,_fromPromise,_last,_mergeAll,_platformBrowser,_filter){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function navigationCancelingError(o){var u=Error("NavigationCancelingError: "+o);return u[NAVIGATION_CANCELING_ERROR]=!0,u}function isNavigationCancelingError(o){return o[NAVIGATION_CANCELING_ERROR]}function defaultUrlMatcher(o,u,h){for(var y=h.path,S=y.split("/"),C={},R=[],T=0,P=0;P<S.length;++P){if(T>=o.length)return null;var U=o[T],A=S[P],x=A.startsWith(":");if(!x&&A!==U.path)return null;x&&(C[A.substring(1)]=U),R.push(U),T++}return"full"===h.pathMatch&&(u.hasChildren()||T<o.length)?null:{consumed:R,posParams:C}}function shallowEqualArrays(o,u){if(o.length!==u.length)return!1;for(var h=0;h<o.length;++h)if(!shallowEqual(o[h],u[h]))return!1;return!0}function shallowEqual(o,u){var h=Object.keys(o),y=Object.keys(u);if(h.length!=y.length)return!1;for(var S=void 0,C=0;C<h.length;C++)if(S=h[C],o[S]!==u[S])return!1;return!0}function flatten(o){for(var u=[],h=0;h<o.length;++h)for(var y=0;y<o[h].length;++y)u.push(o[h][y]);return u}function last(o){return 0<o.length?o[o.length-1]:null}function merge(o,u){var h={};for(var y in o)o.hasOwnProperty(y)&&(h[y]=o[y]);for(var _y in u)u.hasOwnProperty(_y)&&(h[_y]=u[_y]);return h}function forEach(o,u){for(var h in o)o.hasOwnProperty(h)&&u(o[h],h)}function waitForMap(o,u){var h=[],y={};if(forEach(o,function(S,C){C===PRIMARY_OUTLET&&h.push(_map.map.call(u(C,S),function(R){return y[C]=R,R}))}),forEach(o,function(S,C){C!==PRIMARY_OUTLET&&h.push(_map.map.call(u(C,S),function(R){return y[C]=R,R}))}),0<h.length){var S=_concatAll.concatAll.call(_of.of.apply(void 0,h)),C=l.last.call(S);return _map.map.call(C,function(){return y})}return(0,_of.of)(y)}function andObservables(o){var u=_mergeAll.mergeAll.call(o);return _every.every.call(u,function(h){return!0===h})}function wrapIntoObservable(o){return(0,_core.ɵisObservable)(o)?o:(0,_core.ɵisPromise)(o)?(0,_fromPromise.fromPromise)(o):(0,_of.of)(o)}function createEmptyUrlTree(){return new UrlTree(new UrlSegmentGroup([],{}),{},null)}function containsTree(o,u,h){return h?equalQueryParams(o.queryParams,u.queryParams)&&equalSegmentGroups(o.root,u.root):containsQueryParams(o.queryParams,u.queryParams)&&containsSegmentGroup(o.root,u.root)}function equalQueryParams(o,u){return shallowEqual(o,u)}function equalSegmentGroups(o,u){if(!equalPath(o.segments,u.segments))return!1;if(o.numberOfChildren!==u.numberOfChildren)return!1;for(var h in u.children){if(!o.children[h])return!1;if(!equalSegmentGroups(o.children[h],u.children[h]))return!1}return!0}function containsQueryParams(o,u){return Object.keys(u).length<=Object.keys(o).length&&Object.keys(u).every(function(h){return u[h]===o[h]})}function containsSegmentGroup(o,u){return containsSegmentGroupHelper(o,u,u.segments)}function containsSegmentGroupHelper(o,u,h){if(o.segments.length>h.length){var _y2=o.segments.slice(0,h.length);return!!equalPath(_y2,h)&&!u.hasChildren()}if(o.segments.length===h.length){if(!equalPath(o.segments,h))return!1;for(var _y3 in u.children){if(!o.children[_y3])return!1;if(!containsSegmentGroup(o.children[_y3],u.children[_y3]))return!1}return!0}var y=h.slice(0,o.segments.length),S=h.slice(o.segments.length);return!!equalPath(o.segments,y)&&!!o.children[PRIMARY_OUTLET]&&containsSegmentGroupHelper(o.children[PRIMARY_OUTLET],u,S)}function equalSegments(o,u){if(o.length!==u.length)return!1;for(var h=0;h<o.length;++h){if(o[h].path!==u[h].path)return!1;if(!shallowEqual(o[h].parameters,u[h].parameters))return!1}return!0}function equalPath(o,u){if(o.length!==u.length)return!1;for(var h=0;h<o.length;++h)if(o[h].path!==u[h].path)return!1;return!0}function mapChildrenIntoArray(o,u){var h=[];return forEach(o.children,function(y,S){S===PRIMARY_OUTLET&&(h=h.concat(u(y,S)))}),forEach(o.children,function(y,S){S!==PRIMARY_OUTLET&&(h=h.concat(u(y,S)))}),h}function serializePaths(o){return o.segments.map(function(u){return serializePath(u)}).join("/")}function serializeSegment(o,u){if(o.hasChildren()&&u){var h=o.children[PRIMARY_OUTLET]?serializeSegment(o.children[PRIMARY_OUTLET],!1):"",y=[];return forEach(o.children,function(S,C){C!==PRIMARY_OUTLET&&y.push(C+":"+serializeSegment(S,!1))}),0<y.length?h+"("+y.join("//")+")":""+h}if(o.hasChildren()&&!u){var _h=mapChildrenIntoArray(o,function(y,S){return S===PRIMARY_OUTLET?[serializeSegment(o.children[PRIMARY_OUTLET],!1)]:[S+":"+serializeSegment(y,!1)]});return serializePaths(o)+"/("+_h.join("//")+")"}return serializePaths(o)}function encode(o){return encodeURIComponent(o)}function decode(o){return decodeURIComponent(o)}function serializePath(o){return""+encode(o.path)+serializeParams(o.parameters)}function serializeParams(o){return pairs(o).map(function(u){return";"+encode(u.first)+"="+encode(u.second)}).join("")}function serializeQueryParams(o){var u=Object.keys(o).map(function(h){var y=o[h];return Array.isArray(y)?y.map(function(S){return encode(h)+"="+encode(S)}).join("&"):encode(h)+"="+encode(y)});return u.length?"?"+u.join("&"):""}function pairs(o){var u=[];for(var h in o)o.hasOwnProperty(h)&&u.push(new Pair(h,o[h]));return u}function matchSegments(o){SEGMENT_RE.lastIndex=0;var u=o.match(SEGMENT_RE);return u?u[0]:""}function matchQueryParams(o){QUERY_PARAM_RE.lastIndex=0;var u=o.match(SEGMENT_RE);return u?u[0]:""}function matchUrlQueryParamValue(o){QUERY_PARAM_VALUE_RE.lastIndex=0;var u=o.match(QUERY_PARAM_VALUE_RE);return u?u[0]:""}function noMatch(o){return new _Observable.Observable(function(u){return u.error(new NoMatch(o))})}function absoluteRedirect(o){return new _Observable.Observable(function(u){return u.error(new AbsoluteRedirect(o))})}function namedOutletsRedirect(o){return new _Observable.Observable(function(u){return u.error(new Error("Only absolute redirects can have named outlets. redirectTo: '"+o+"'"))})}function canLoadFails(o){return new _Observable.Observable(function(u){return u.error(navigationCancelingError("Cannot load children because the guard of the route \"path: '"+o.path+"'\" returned false"))})}function applyRedirects(o,u,h,y,S){return new ApplyRedirects(o,u,h,y,S).apply()}function runGuards(o,u){var h=u.canLoad;if(!h||0===h.length)return(0,_of.of)(!0);var y=_map.map.call((0,_from.from)(h),function(S){var C=o.get(S);return wrapIntoObservable(C.canLoad?C.canLoad(u):C(u))});return andObservables(y)}function match(o,u,h){if(""===u.path)return"full"===u.pathMatch&&(o.hasChildren()||0<h.length)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var S=u.matcher||defaultUrlMatcher,C=S(h,o,u);return C?{matched:!0,consumedSegments:C.consumed,lastChild:C.consumed.length,positionalParamSegments:C.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function split(o,u,h,y){if(0<h.length&&containsEmptyPathRedirectsWithNamedOutlets(o,h,y)){var S=new UrlSegmentGroup(u,createChildrenForEmptySegments(y,new UrlSegmentGroup(h,o.children)));return{segmentGroup:mergeTrivialChildren(S),slicedSegments:[]}}if(0===h.length&&containsEmptyPathRedirects(o,h,y)){var _S=new UrlSegmentGroup(o.segments,addEmptySegmentsToChildrenIfNeeded(o,h,y,o.children));return{segmentGroup:mergeTrivialChildren(_S),slicedSegments:h}}return{segmentGroup:o,slicedSegments:h}}function mergeTrivialChildren(o){if(1===o.numberOfChildren&&o.children[PRIMARY_OUTLET]){var u=o.children[PRIMARY_OUTLET];return new UrlSegmentGroup(o.segments.concat(u.segments),u.children)}return o}function addEmptySegmentsToChildrenIfNeeded(o,u,h,y){var S={},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=h[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var C=_step2.value;emptyPathRedirect(o,u,C)&&!y[getOutlet$1(C)]&&(S[getOutlet$1(C)]=new UrlSegmentGroup([],{}))}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return merge(y,S)}function createChildrenForEmptySegments(o,u){var h={};h[PRIMARY_OUTLET]=u;var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=o[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var y=_step3.value;""===y.path&&getOutlet$1(y)!==PRIMARY_OUTLET&&(h[getOutlet$1(y)]=new UrlSegmentGroup([],{}))}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}return h}function containsEmptyPathRedirectsWithNamedOutlets(o,u,h){return 0<h.filter(function(y){return emptyPathRedirect(o,u,y)&&getOutlet$1(y)!==PRIMARY_OUTLET}).length}function containsEmptyPathRedirects(o,u,h){return 0<h.filter(function(y){return emptyPathRedirect(o,u,y)}).length}function emptyPathRedirect(o,u,h){return(!(o.hasChildren()||0<u.length)||"full"!==h.pathMatch)&&(""===h.path&&void 0!==h.redirectTo)}function getOutlet$1(o){return o.outlet?o.outlet:PRIMARY_OUTLET}function validateConfig(o){for(var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",h=0;h<o.length;h++){var y=o[h],S=getFullPath(u,y);validateNode(y,S)}}function validateNode(o,u){if(!o)throw new Error("\n      Invalid configuration of route '"+u+"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    ");if(Array.isArray(o))throw new Error("Invalid configuration of route '"+u+"': Array cannot be specified");if(!o.component&&o.outlet&&o.outlet!==PRIMARY_OUTLET)throw new Error("Invalid configuration of route '"+u+"': a componentless route cannot have a named outlet set");if(o.redirectTo&&o.children)throw new Error("Invalid configuration of route '"+u+"': redirectTo and children cannot be used together");if(o.redirectTo&&o.loadChildren)throw new Error("Invalid configuration of route '"+u+"': redirectTo and loadChildren cannot be used together");if(o.children&&o.loadChildren)throw new Error("Invalid configuration of route '"+u+"': children and loadChildren cannot be used together");if(o.redirectTo&&o.component)throw new Error("Invalid configuration of route '"+u+"': redirectTo and component cannot be used together");if(o.path&&o.matcher)throw new Error("Invalid configuration of route '"+u+"': path and matcher cannot be used together");if(void 0===o.redirectTo&&!o.component&&!o.children&&!o.loadChildren)throw new Error("Invalid configuration of route '"+u+"'. One of the following must be provided: component, redirectTo, children or loadChildren");if(void 0===o.path&&void 0===o.matcher)throw new Error("Invalid configuration of route '"+u+"': routes must have either a path or a matcher specified");if("string"==typeof o.path&&"/"===o.path.charAt(0))throw new Error("Invalid configuration of route '"+u+"': path cannot start with a slash");if(""===o.path&&void 0!==o.redirectTo&&void 0===o.pathMatch){var h="The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.";throw new Error("Invalid configuration of route '{path: \""+u+'", redirectTo: "'+o.redirectTo+"\"}': please provide 'pathMatch'. "+h)}if(void 0!==o.pathMatch&&"full"!==o.pathMatch&&"prefix"!==o.pathMatch)throw new Error("Invalid configuration of route '"+u+"': pathMatch can only be set to 'prefix' or 'full'");o.children&&validateConfig(o.children,u)}function getFullPath(o,u){return u?o||u.path?o&&!u.path?o+"/":!o&&u.path?u.path:o+"/"+u.path:"":o}function findNode(o,u){if(o===u.value)return u;var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=u.children[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var h=_step4.value,y=findNode(o,h);if(y)return y}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}return null}function findPath(o,u,h){if(h.push(u),o===u.value)return h;var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=u.children[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var y=_step5.value,S=h.slice(0),C=findPath(o,y,S);if(0<C.length)return C}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}return[]}function createEmptyState(o,u){var h=createEmptyStateSnapshot(o,u),y=new _BehaviorSubject.BehaviorSubject([new UrlSegment("",{})]),S=new _BehaviorSubject.BehaviorSubject({}),C=new _BehaviorSubject.BehaviorSubject({}),R=new _BehaviorSubject.BehaviorSubject({}),T=new _BehaviorSubject.BehaviorSubject(""),P=new ActivatedRoute(y,S,R,T,C,PRIMARY_OUTLET,u,h.root);return P.snapshot=h.root,new RouterState(new TreeNode(P,[]),h)}function createEmptyStateSnapshot(o,u){var R=new ActivatedRouteSnapshot([],{},{},"",{},PRIMARY_OUTLET,u,null,o.root,(-1),{});return new RouterStateSnapshot("",new TreeNode(R,[]))}function inheritedParamsDataResolve(o){for(var u=o.pathFromRoot,h=u.length-1;1<=h;){var y=u[h],S=u[h-1];if(y.routeConfig&&""===y.routeConfig.path)h--;else{if(S.component)break;h--}}return u.slice(h).reduce(function(y,S){var C=merge(y.params,S.params),R=merge(y.data,S.data),T=merge(y.resolve,S._resolvedData);return{params:C,data:R,resolve:T}},{params:{},data:{},resolve:{}})}function setRouterStateSnapshot(o,u){u.value._routerState=o,u.children.forEach(function(h){return setRouterStateSnapshot(o,h)})}function serializeNode(o){var u=0<o.children.length?" { "+o.children.map(serializeNode).join(", ")+" } ":"";return""+o.value+u}function advanceActivatedRoute(o){if(o.snapshot){var u=o.snapshot;o.snapshot=o._futureSnapshot,shallowEqual(u.queryParams,o._futureSnapshot.queryParams)||o.queryParams.next(o._futureSnapshot.queryParams),u.fragment!==o._futureSnapshot.fragment&&o.fragment.next(o._futureSnapshot.fragment),shallowEqual(u.params,o._futureSnapshot.params)||o.params.next(o._futureSnapshot.params),shallowEqualArrays(u.url,o._futureSnapshot.url)||o.url.next(o._futureSnapshot.url),equalParamsAndUrlSegments(u,o._futureSnapshot)||o.data.next(o._futureSnapshot.data)}else o.snapshot=o._futureSnapshot,o.data.next(o._futureSnapshot.data)}function equalParamsAndUrlSegments(o,u){var h=shallowEqual(o.params,u.params)&&equalSegments(o.url,u.url),y=!o.parent!=!u.parent;return h&&!y&&(!o.parent||equalParamsAndUrlSegments(o.parent,u.parent))}function createRouterState(o,u,h){var y=createNode(o,u._root,h?h._root:void 0);return new RouterState(y,u)}function createNode(o,u,h){if(h&&o.shouldReuseRoute(u.value,h.value.snapshot)){var _y4=h.value;_y4._futureSnapshot=u.value;var _S2=createOrReuseChildren(o,u,h);return new TreeNode(_y4,_S2)}if(o.retrieve(u.value)){var _y5=o.retrieve(u.value).route;return setFutureSnapshotsOfActivatedRoutes(u,_y5),_y5}var y=createActivatedRoute(u.value),S=u.children.map(function(C){return createNode(o,C)});return new TreeNode(y,S)}function setFutureSnapshotsOfActivatedRoutes(o,u){if(o.value.routeConfig!==u.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(o.children.length!==u.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");u.value._futureSnapshot=o.value;for(var h=0;h<o.children.length;++h)setFutureSnapshotsOfActivatedRoutes(o.children[h],u.children[h])}function createOrReuseChildren(o,u,h){return u.children.map(function(y){var _iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _step6,_iterator6=h.children[Symbol.iterator]();!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var S=_step6.value;if(o.shouldReuseRoute(S.value.snapshot,y.value))return createNode(o,y,S)}}catch(err){_didIteratorError6=!0,_iteratorError6=err}finally{try{!_iteratorNormalCompletion6&&_iterator6.return&&_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}return createNode(o,y)})}function createActivatedRoute(o){return new ActivatedRoute(new _BehaviorSubject.BehaviorSubject(o.url),new _BehaviorSubject.BehaviorSubject(o.params),new _BehaviorSubject.BehaviorSubject(o.queryParams),new _BehaviorSubject.BehaviorSubject(o.fragment),new _BehaviorSubject.BehaviorSubject(o.data),o.outlet,o.component,o)}function _createUrlTree(o,u,h,y,S){if(0===h.length)return tree(u.root,u.root,u,y,S);var C=computeNavigation(h);if(C.toRoot())return tree(u.root,new UrlSegmentGroup([],{}),u,y,S);var R=findStartingPosition(C,u,o),T=R.processChildren?updateSegmentGroupChildren(R.segmentGroup,R.index,C.commands):updateSegmentGroup(R.segmentGroup,R.index,C.commands);return tree(R.segmentGroup,T,u,y,S)}function isMatrixParams(o){return"object"==("undefined"==typeof o?"undefined":_typeof(o))&&null!=o&&!o.outlets&&!o.segmentPath}function tree(o,u,h,y,S){return h.root===o?new UrlTree(u,stringify(y),S):new UrlTree(replaceSegment(h.root,o,u),stringify(y),S)}function replaceSegment(o,u,h){var y={};return forEach(o.children,function(S,C){y[C]=S===u?h:replaceSegment(S,u,h)}),new UrlSegmentGroup(o.segments,y)}function computeNavigation(o){if("string"==typeof o[0]&&1===o.length&&"/"===o[0])return new Navigation((!0),0,o);var u=0,h=!1,y=o.reduce(function(S,C,R){if("object"==("undefined"==typeof C?"undefined":_typeof(C))&&null!=C){if(C.outlets){var T={};return forEach(C.outlets,function(P,U){T[U]="string"==typeof P?P.split("/"):P}),[].concat(_toConsumableArray(S),[{outlets:T}])}if(C.segmentPath)return[].concat(_toConsumableArray(S),[C.segmentPath])}return"string"==typeof C&&0===R?(C.split("/").forEach(function(T,P){0==P&&"."===T||(0==P&&""===T?h=!0:".."===T?u++:""!=T&&S.push(T))}),S):[].concat(_toConsumableArray(S),[C])},[]);return new Navigation(h,u,y)}function findStartingPosition(o,u,h){if(o.isAbsolute)return new Position(u.root,(!0),0);if(-1===h.snapshot._lastPathIndex)return new Position(h.snapshot._urlSegment,(!0),0);var y=isMatrixParams(o.commands[0])?0:1,S=h.snapshot._lastPathIndex+y;return createPositionApplyingDoubleDots(h.snapshot._urlSegment,S,o.numberOfDoubleDots)}function createPositionApplyingDoubleDots(o,u,h){for(var y=o,S=u,C=h;C>S;){if(C-=S,y=y.parent,!y)throw new Error("Invalid number of '../'");S=y.segments.length}return new Position(y,(!1),S-C)}function getPath(o){return"object"==("undefined"==typeof o?"undefined":_typeof(o))&&null!=o&&o.outlets?o.outlets[PRIMARY_OUTLET]:""+o}function getOutlets(o){return"object"==_typeof(o[0])?void 0===o[0].outlets?_defineProperty({},PRIMARY_OUTLET,o):o[0].outlets:_defineProperty({},PRIMARY_OUTLET,o)}function updateSegmentGroup(o,u,h){if(o||(o=new UrlSegmentGroup([],{})),0===o.segments.length&&o.hasChildren())return updateSegmentGroupChildren(o,u,h);var y=prefixedWith(o,u,h),S=h.slice(y.commandIndex);if(y.match&&y.pathIndex<o.segments.length){var C=new UrlSegmentGroup(o.segments.slice(0,y.pathIndex),{});return C.children[PRIMARY_OUTLET]=new UrlSegmentGroup(o.segments.slice(y.pathIndex),o.children),updateSegmentGroupChildren(C,0,S)}return y.match&&0===S.length?new UrlSegmentGroup(o.segments,{}):y.match&&!o.hasChildren()?createNewSegmentGroup(o,u,h):y.match?updateSegmentGroupChildren(o,0,S):createNewSegmentGroup(o,u,h)}function updateSegmentGroupChildren(o,u,h){if(0===h.length)return new UrlSegmentGroup(o.segments,{});var y=getOutlets(h),S={};return forEach(y,function(C,R){null!==C&&(S[R]=updateSegmentGroup(o.children[R],u,C))}),forEach(o.children,function(C,R){void 0===y[R]&&(S[R]=C)}),new UrlSegmentGroup(o.segments,S)}function prefixedWith(o,u,h){for(var y=0,S=u,C={match:!1,pathIndex:0,commandIndex:0};S<o.segments.length;){if(y>=h.length)return C;var R=o.segments[S],T=getPath(h[y]),P=y<h.length-1?h[y+1]:null;if(0<S&&void 0===T)break;if(T&&P&&"object"==("undefined"==typeof P?"undefined":_typeof(P))&&void 0===P.outlets){if(!compare(T,P,R))return C;y+=2}else{if(!compare(T,{},R))return C;y++}S++}return{match:!0,pathIndex:S,commandIndex:y}}function createNewSegmentGroup(o,u,h){for(var y=o.segments.slice(0,u),S=0;S<h.length;){if("object"==_typeof(h[S])&&void 0!==h[S].outlets){var T=createNewSegmentChildren(h[S].outlets);return new UrlSegmentGroup(y,T)}if(0==S&&isMatrixParams(h[0])){var _T=o.segments[u];y.push(new UrlSegment(_T.path,h[0])),S++}else{var C=getPath(h[S]),R=S<h.length-1?h[S+1]:null;C&&R&&isMatrixParams(R)?(y.push(new UrlSegment(C,stringify(R))),S+=2):(y.push(new UrlSegment(C,{})),S++)}}return new UrlSegmentGroup(y,{})}function createNewSegmentChildren(o){var u={};return forEach(o,function(h,y){null!==h&&(u[y]=createNewSegmentGroup(new UrlSegmentGroup([],{}),0,h))}),u}function stringify(o){var u={};return forEach(o,function(h,y){return u[y]=""+h}),u}function compare(o,u,h){return o==h.path&&shallowEqual(u,h.parameters)}function recognize(o,u,h,y){return new Recognizer(o,u,h,y).recognize()}function sortActivatedRouteSnapshots(o){o.sort(function(u,h){return u.value.outlet===PRIMARY_OUTLET?-1:h.value.outlet===PRIMARY_OUTLET?1:u.value.outlet.localeCompare(h.value.outlet)})}function getChildConfig(o){return o.children?o.children:o.loadChildren?o._loadedConfig.routes:[]}function match$1(o,u,h){if(""===u.path){if("full"===u.pathMatch&&(o.hasChildren()||0<h.length))throw new NoMatch$1;return{consumedSegments:[],lastChild:0,parameters:{}}}var y=u.matcher||defaultUrlMatcher,S=y(h,o,u);if(!S)throw new NoMatch$1;var C={};forEach(S.posParams,function(T,P){C[P]=T.path});var R=merge(C,S.consumed[S.consumed.length-1].parameters);return{consumedSegments:S.consumed,lastChild:S.consumed.length,parameters:R}}function checkOutletNameUniqueness(o){var u={};o.forEach(function(h){var y=u[h.value.outlet];if(y){var S=y.url.map(function(R){return R.toString()}).join("/"),C=h.value.url.map(function(R){return R.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+S+"' and '"+C+"'.")}u[h.value.outlet]=h.value})}function getSourceSegmentGroup(o){for(var u=o;u._sourceSegment;)u=u._sourceSegment;return u}function getPathIndexShift(o){for(var u=o,h=u._segmentIndexShift?u._segmentIndexShift:0;u._sourceSegment;)u=u._sourceSegment,h+=u._segmentIndexShift?u._segmentIndexShift:0;return h-1}function split$1(o,u,h,y){if(0<h.length&&containsEmptyPathMatchesWithNamedOutlets(o,h,y)){var _S3=new UrlSegmentGroup(u,createChildrenForEmptyPaths(o,u,y,new UrlSegmentGroup(h,o.children)));return _S3._sourceSegment=o,_S3._segmentIndexShift=u.length,{segmentGroup:_S3,slicedSegments:[]}}if(0===h.length&&containsEmptyPathMatches(o,h,y)){var _S4=new UrlSegmentGroup(o.segments,addEmptyPathsToChildrenIfNeeded(o,h,y,o.children));return _S4._sourceSegment=o,_S4._segmentIndexShift=u.length,{segmentGroup:_S4,slicedSegments:h}}var S=new UrlSegmentGroup(o.segments,o.children);return S._sourceSegment=o,S._segmentIndexShift=u.length,{segmentGroup:S,slicedSegments:h}}function addEmptyPathsToChildrenIfNeeded(o,u,h,y){var S={},_iteratorNormalCompletion8=!0,_didIteratorError8=!1,_iteratorError8=void 0;try{for(var _step8,_iterator8=h[Symbol.iterator]();!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=!0){var C=_step8.value;if(emptyPathMatch(o,u,C)&&!y[getOutlet$2(C)]){var R=new UrlSegmentGroup([],{});R._sourceSegment=o,R._segmentIndexShift=o.segments.length,S[getOutlet$2(C)]=R}}}catch(err){_didIteratorError8=!0,_iteratorError8=err}finally{try{!_iteratorNormalCompletion8&&_iterator8.return&&_iterator8.return()}finally{if(_didIteratorError8)throw _iteratorError8}}return merge(y,S)}function createChildrenForEmptyPaths(o,u,h,y){var S={};S[PRIMARY_OUTLET]=y,y._sourceSegment=o,y._segmentIndexShift=u.length;var _iteratorNormalCompletion9=!0,_didIteratorError9=!1,_iteratorError9=void 0;try{for(var _step9,_iterator9=h[Symbol.iterator]();!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=!0){var C=_step9.value;if(""===C.path&&getOutlet$2(C)!==PRIMARY_OUTLET){var R=new UrlSegmentGroup([],{});R._sourceSegment=o,R._segmentIndexShift=u.length,S[getOutlet$2(C)]=R}}}catch(err){_didIteratorError9=!0,_iteratorError9=err}finally{try{!_iteratorNormalCompletion9&&_iterator9.return&&_iterator9.return()}finally{if(_didIteratorError9)throw _iteratorError9}}return S}function containsEmptyPathMatchesWithNamedOutlets(o,u,h){return 0<h.filter(function(y){return emptyPathMatch(o,u,y)&&getOutlet$2(y)!==PRIMARY_OUTLET}).length}function containsEmptyPathMatches(o,u,h){return 0<h.filter(function(y){return emptyPathMatch(o,u,y)}).length}function emptyPathMatch(o,u,h){return(!(o.hasChildren()||0<u.length)||"full"!==h.pathMatch)&&(""===h.path&&void 0===h.redirectTo)}function getOutlet$2(o){return o.outlet?o.outlet:PRIMARY_OUTLET}function getData(o){return o.data?o.data:{}}function getResolve(o){return o.resolve?o.resolve:{}}function defaultErrorHandler(o){throw o}function advanceActivatedRouteNodeAndItsChildren(o){advanceActivatedRoute(o.value),o.children.forEach(advanceActivatedRouteNodeAndItsChildren)}function parentLoadedConfig(o){for(var u=o.parent;u;){var h=u._routeConfig;if(h&&h._loadedConfig)return h._loadedConfig;if(h&&h.component)return null;u=u.parent}return null}function closestLoadedConfig(o){if(!o)return null;for(var u=o.parent;u;){var h=u._routeConfig;if(h&&h._loadedConfig)return h._loadedConfig;u=u.parent}return null}function nodeChildrenAsMap(o){return o?o.children.reduce(function(u,h){return u[h.value.outlet]=h,u},{}):{}}function getOutlet(o,u){var h=o._outlets[u.outlet];if(!h){var y=u.component.name;throw u.outlet===PRIMARY_OUTLET?new Error("Cannot find primary outlet to load '"+y+"'"):new Error("Cannot find the outlet "+u.outlet+" to load '"+y+"'")}return h}function validateCommands(o){for(var u=0;u<o.length;u++){var h=o[u];if(null==h)throw new Error("The requested path contains "+h+" segment at index "+u)}}function attrBoolValue(o){return""===o||!!o}function routerNgProbeToken(){return new _core.NgProbeToken("Router",Router)}function provideLocationStrategy(o,u){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return h.useHash?new _common.HashLocationStrategy(o,u):new _common.PathLocationStrategy(o,u)}function provideForRootGuard(o){if(o)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function provideRoutes(o){return[{provide:_core.ANALYZE_FOR_ENTRY_COMPONENTS,multi:!0,useValue:o},{provide:ROUTES,multi:!0,useValue:o}]}function setupRouter(o,u,h,y,S,C,R,T){var P=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},U=arguments[9],A=arguments[10],x=new Router(null,u,h,y,S,C,R,flatten(T));if(U&&(x.urlHandlingStrategy=U),A&&(x.routeReuseStrategy=A),P.errorHandler&&(x.errorHandler=P.errorHandler),P.enableTracing){var I=(0,_platformBrowser.ɵgetDOM)();x.events.subscribe(function(E){I.logGroup("Router Event: "+E.constructor.name),I.log(E.toString()),I.log(E),I.logGroupEnd()})}return x}function rootRoute(o){return o.routerState.root}function initialRouterNavigation(o,u,h,y){return function(S){S!==u.components[0]||(o.resetRootComponentType(u.componentTypes[0]),h.setUpPreloading(),!1===y.initialNavigation?o.setUpLocationChangeListener():o.initialNavigation())}}function provideRouterInitializer(){return[{provide:ROUTER_INITIALIZER,useFactory:initialRouterNavigation,deps:[Router,_core.ApplicationRef,RouterPreloader,ROUTER_CONFIGURATION]},{provide:_core.APP_BOOTSTRAP_LISTENER,multi:!0,useExisting:ROUTER_INITIALIZER}]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ɵj=exports.ɵi=exports.ɵe=exports.ɵb=exports.ɵf=exports.ɵh=exports.ɵc=exports.ɵd=exports.ɵg=exports.ɵa=exports.ɵflatten=exports.ɵROUTER_PROVIDERS=exports.VERSION=exports.UrlTree=exports.UrlSerializer=exports.UrlSegmentGroup=exports.UrlSegment=exports.DefaultUrlSerializer=exports.UrlHandlingStrategy=exports.PRIMARY_OUTLET=exports.RouterStateSnapshot=exports.RouterState=exports.ActivatedRouteSnapshot=exports.ActivatedRoute=exports.RouterPreloader=exports.PreloadingStrategy=exports.PreloadAllModules=exports.NoPreloading=exports.RouterOutletMap=exports.provideRoutes=exports.RouterModule=exports.ROUTER_INITIALIZER=exports.ROUTER_CONFIGURATION=exports.ROUTES=exports.Router=exports.RouteReuseStrategy=exports.RoutesRecognized=exports.RouteConfigLoadStart=exports.RouteConfigLoadEnd=exports.NavigationStart=exports.NavigationError=exports.NavigationEnd=exports.NavigationCancel=exports.RouterOutlet=exports.RouterLinkActive=exports.RouterLinkWithHref=exports.RouterLink=void 0;
var l=_interopRequireWildcard(_last),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),NavigationStart=function(){function NavigationStart(o,u){_classCallCheck(this,NavigationStart),this.id=o,this.url=u}return _createClass(NavigationStart,[{key:"toString",value:function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"}}]),NavigationStart}(),NavigationEnd=function(){function NavigationEnd(o,u,h){_classCallCheck(this,NavigationEnd),this.id=o,this.url=u,this.urlAfterRedirects=h}return _createClass(NavigationEnd,[{key:"toString",value:function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"}}]),NavigationEnd}(),NavigationCancel=function(){function NavigationCancel(o,u,h){_classCallCheck(this,NavigationCancel),this.id=o,this.url=u,this.reason=h}return _createClass(NavigationCancel,[{key:"toString",value:function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"}}]),NavigationCancel}(),NavigationError=function(){function NavigationError(o,u,h){_classCallCheck(this,NavigationError),this.id=o,this.url=u,this.error=h}return _createClass(NavigationError,[{key:"toString",value:function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"}}]),NavigationError}(),RoutesRecognized=function(){function RoutesRecognized(o,u,h,y){_classCallCheck(this,RoutesRecognized),this.id=o,this.url=u,this.urlAfterRedirects=h,this.state=y}return _createClass(RoutesRecognized,[{key:"toString",value:function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"}}]),RoutesRecognized}(),RouteConfigLoadStart=function(){function RouteConfigLoadStart(o){_classCallCheck(this,RouteConfigLoadStart),this.route=o}return _createClass(RouteConfigLoadStart,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: "+this.route.path+")"}}]),RouteConfigLoadStart}(),RouteConfigLoadEnd=function(){function RouteConfigLoadEnd(o){_classCallCheck(this,RouteConfigLoadEnd),this.route=o}return _createClass(RouteConfigLoadEnd,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: "+this.route.path+")"}}]),RouteConfigLoadEnd}(),PRIMARY_OUTLET="primary",NAVIGATION_CANCELING_ERROR="ngNavigationCancelingError",ROUTES=new _core.InjectionToken("ROUTES"),LoadedRouterConfig=function LoadedRouterConfig(o,u,h,y){_classCallCheck(this,LoadedRouterConfig),this.routes=o,this.injector=u,this.factoryResolver=h,this.injectorFactory=y},RouterConfigLoader=function(){function RouterConfigLoader(o,u,h,y){_classCallCheck(this,RouterConfigLoader),this.loader=o,this.compiler=u,this.onLoadStartListener=h,this.onLoadEndListener=y}return _createClass(RouterConfigLoader,[{key:"load",value:function(o,u){var _this=this;this.onLoadStartListener&&this.onLoadStartListener(u);var h=this.loadModuleFactory(u.loadChildren);return _map.map.call(h,function(y){_this.onLoadEndListener&&_this.onLoadEndListener(u);var S=y.create(o);return new LoadedRouterConfig(flatten(S.injector.get(ROUTES)),S.injector,S.componentFactoryResolver,function(R){return y.create(R).injector})})}},{key:"loadModuleFactory",value:function(o){var _this2=this;if("string"==typeof o)return(0,_fromPromise.fromPromise)(this.loader.load(o));var u=this.compiler instanceof _core.Compiler;return _mergeMap.mergeMap.call(wrapIntoObservable(o()),function(h){return u?(0,_of.of)(h):(0,_fromPromise.fromPromise)(_this2.compiler.compileModuleAsync(h))})}}]),RouterConfigLoader}(),UrlTree=function(){function UrlTree(o,u,h){_classCallCheck(this,UrlTree),this.root=o,this.queryParams=u,this.fragment=h}return _createClass(UrlTree,[{key:"toString",value:function(){return(new DefaultUrlSerializer).serialize(this)}}]),UrlTree}(),UrlSegmentGroup=function(){function UrlSegmentGroup(o,u){var _this3=this;_classCallCheck(this,UrlSegmentGroup),this.segments=o,this.children=u,this.parent=null,forEach(u,function(h){return h.parent=_this3})}return _createClass(UrlSegmentGroup,[{key:"hasChildren",value:function(){return 0<this.numberOfChildren}},{key:"toString",value:function(){return serializePaths(this)}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}}]),UrlSegmentGroup}(),UrlSegment=function(){function UrlSegment(o,u){_classCallCheck(this,UrlSegment),this.path=o,this.parameters=u}return _createClass(UrlSegment,[{key:"toString",value:function(){return serializePath(this)}}]),UrlSegment}(),UrlSerializer=function(){function UrlSerializer(){_classCallCheck(this,UrlSerializer)}return _createClass(UrlSerializer,[{key:"parse",value:function(){}},{key:"serialize",value:function(){}}]),UrlSerializer}(),DefaultUrlSerializer=function(){function DefaultUrlSerializer(){_classCallCheck(this,DefaultUrlSerializer)}return _createClass(DefaultUrlSerializer,[{key:"parse",value:function(o){var u=new UrlParser(o);return new UrlTree(u.parseRootSegment(),u.parseQueryParams(),u.parseFragment())}},{key:"serialize",value:function(o){var u="/"+serializeSegment(o.root,!0),h=serializeQueryParams(o.queryParams),y=null!==o.fragment&&void 0!==o.fragment?"#"+encodeURI(o.fragment):"";return""+u+h+y}}]),DefaultUrlSerializer}(),Pair=function Pair(o,u){_classCallCheck(this,Pair),this.first=o,this.second=u},SEGMENT_RE=/^[^\/()?;=&#]+/,QUERY_PARAM_RE=/^[^=?&#]+/,QUERY_PARAM_VALUE_RE=/^[^?&#]+/,UrlParser=function(){function UrlParser(o){_classCallCheck(this,UrlParser),this.url=o,this.remaining=o}return _createClass(UrlParser,[{key:"peekStartsWith",value:function(o){return this.remaining.startsWith(o)}},{key:"capture",value:function(o){if(!this.remaining.startsWith(o))throw new Error('Expected "'+o+'".');this.remaining=this.remaining.substring(o.length)}},{key:"parseRootSegment",value:function(){return this.remaining.startsWith("/")&&this.capture("/"),""===this.remaining||this.remaining.startsWith("?")||this.remaining.startsWith("#")?new UrlSegmentGroup([],{}):new UrlSegmentGroup([],this.parseChildren())}},{key:"parseChildren",value:function(){if(0==this.remaining.length)return{};this.peekStartsWith("/")&&this.capture("/");var o=[];for(this.peekStartsWith("(")||o.push(this.parseSegments());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),o.push(this.parseSegments());var u={};this.peekStartsWith("/(")&&(this.capture("/"),u=this.parseParens(!0));var h={};return this.peekStartsWith("(")&&(h=this.parseParens(!1)),(0<o.length||0<Object.keys(u).length)&&(h[PRIMARY_OUTLET]=new UrlSegmentGroup(o,u)),h}},{key:"parseSegments",value:function(){var o=matchSegments(this.remaining);if(""===o&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");this.capture(o);var u={};return this.peekStartsWith(";")&&(u=this.parseMatrixParams()),new UrlSegment(decode(o),u)}},{key:"parseQueryParams",value:function(){var o={};if(this.peekStartsWith("?"))for(this.capture("?"),this.parseQueryParam(o);0<this.remaining.length&&this.peekStartsWith("&");)this.capture("&"),this.parseQueryParam(o);return o}},{key:"parseFragment",value:function(){return this.peekStartsWith("#")?decodeURI(this.remaining.substring(1)):null}},{key:"parseMatrixParams",value:function(){for(var o={};0<this.remaining.length&&this.peekStartsWith(";");)this.capture(";"),this.parseParam(o);return o}},{key:"parseParam",value:function(o){var u=matchSegments(this.remaining);if(u){this.capture(u);var h="";if(this.peekStartsWith("=")){this.capture("=");var y=matchSegments(this.remaining);y&&(h=y,this.capture(h))}o[decode(u)]=decode(h)}}},{key:"parseQueryParam",value:function(o){var u=matchQueryParams(this.remaining);if(u){this.capture(u);var h="";if(this.peekStartsWith("=")){this.capture("=");var C=matchUrlQueryParamValue(this.remaining);C&&(h=C,this.capture(h))}var y=decode(u),S=decode(h);if(o.hasOwnProperty(y)){var _C=o[y];Array.isArray(_C)||(_C=[_C],o[y]=_C),_C.push(S)}else o[y]=S}}},{key:"parseParens",value:function(o){var u={};for(this.capture("(");!this.peekStartsWith(")")&&0<this.remaining.length;){var h=matchSegments(this.remaining),y=this.remaining[h.length];if("/"!==y&&")"!==y&&";"!==y)throw new Error("Cannot parse url '"+this.url+"'");var S=void 0;-1<h.indexOf(":")?(S=h.substr(0,h.indexOf(":")),this.capture(S),this.capture(":")):o&&(S=PRIMARY_OUTLET);var C=this.parseChildren();u[S]=1===Object.keys(C).length?C[PRIMARY_OUTLET]:new UrlSegmentGroup([],C),this.peekStartsWith("//")&&this.capture("//")}return this.capture(")"),u}}]),UrlParser}(),NoMatch=function NoMatch(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,NoMatch),this.segmentGroup=o},AbsoluteRedirect=function AbsoluteRedirect(o){_classCallCheck(this,AbsoluteRedirect),this.urlTree=o},ApplyRedirects=function(){function ApplyRedirects(o,u,h,y,S){_classCallCheck(this,ApplyRedirects),this.injector=o,this.configLoader=u,this.urlSerializer=h,this.urlTree=y,this.config=S,this.allowRedirects=!0}return _createClass(ApplyRedirects,[{key:"apply",value:function(){var _this4=this,o=this.expandSegmentGroup(this.injector,this.config,this.urlTree.root,PRIMARY_OUTLET),u=_map.map.call(o,function(h){return _this4.createUrlTree(h,_this4.urlTree.queryParams,_this4.urlTree.fragment)});return _catch2._catch.call(u,function(h){if(h instanceof AbsoluteRedirect)return _this4.allowRedirects=!1,_this4.match(h.urlTree);if(h instanceof NoMatch)throw _this4.noMatchError(h);throw h})}},{key:"match",value:function(o){var _this5=this,u=this.expandSegmentGroup(this.injector,this.config,o.root,PRIMARY_OUTLET),h=_map.map.call(u,function(y){return _this5.createUrlTree(y,o.queryParams,o.fragment)});return _catch2._catch.call(h,function(y){if(y instanceof NoMatch)throw _this5.noMatchError(y);throw y})}},{key:"noMatchError",value:function(o){return new Error("Cannot match any routes. URL Segment: '"+o.segmentGroup+"'")}},{key:"createUrlTree",value:function(o,u,h){var y=0<o.segments.length?new UrlSegmentGroup([],_defineProperty({},PRIMARY_OUTLET,o)):o;return new UrlTree(y,u,h)}},{key:"expandSegmentGroup",value:function(o,u,h,y){return 0===h.segments.length&&h.hasChildren()?_map.map.call(this.expandChildren(o,u,h),function(S){return new UrlSegmentGroup([],S)}):this.expandSegment(o,h,u,h.segments,y,!0)}},{key:"expandChildren",value:function(o,u,h){var _this6=this;return waitForMap(h.children,function(y,S){return _this6.expandSegmentGroup(o,u,S,y)})}},{key:"expandSegment",value:function(o,u,h,y,S,C){var _this7=this,R=_of.of.apply(void 0,_toConsumableArray(h)),T=_map.map.call(R,function(A){var x=_this7.expandSegmentAgainstRoute(o,u,h,A,y,S,C);return _catch2._catch.call(x,function(I){if(I instanceof NoMatch)return(0,_of.of)(null);throw I})}),P=_concatAll.concatAll.call(T),U=_first.first.call(P,function(A){return!!A});return _catch2._catch.call(U,function(A){if(A instanceof _EmptyError.EmptyError){if(_this7.noLeftoversInUrl(u,y,S))return(0,_of.of)(new UrlSegmentGroup([],{}));throw new NoMatch(u)}throw A})}},{key:"noLeftoversInUrl",value:function(o,u,h){return 0===u.length&&!o.children[h]}},{key:"expandSegmentAgainstRoute",value:function(o,u,h,y,S,C,R){return getOutlet$1(y)===C&&(void 0===y.redirectTo||R&&this.allowRedirects)?void 0===y.redirectTo?this.matchSegmentAgainstRoute(o,u,y,S):this.expandSegmentAgainstRouteUsingRedirect(o,u,h,y,S,C):noMatch(u)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(o,u,h,y,S,C){return"**"===y.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(o,h,y,C):this.expandRegularSegmentAgainstRouteUsingRedirect(o,u,h,y,S,C)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(o,u,h,y){var _this8=this,S=this.applyRedirectCommands([],h.redirectTo,{});return h.redirectTo.startsWith("/")?absoluteRedirect(S):_mergeMap.mergeMap.call(this.lineralizeSegments(h,S),function(C){var R=new UrlSegmentGroup(C,{});return _this8.expandSegment(o,R,u,C,y,!1)})}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(o,u,h,y,S,C){var _this9=this,_match=match(u,y,S),R=_match.matched,T=_match.consumedSegments,P=_match.lastChild,U=_match.positionalParamSegments;if(!R)return noMatch(u);var A=this.applyRedirectCommands(T,y.redirectTo,U);return y.redirectTo.startsWith("/")?absoluteRedirect(A):_mergeMap.mergeMap.call(this.lineralizeSegments(y,A),function(x){return _this9.expandSegment(o,u,h,x.concat(S.slice(P)),C,!1)})}},{key:"matchSegmentAgainstRoute",value:function(o,u,h,y){var _this10=this;if("**"===h.path)return h.loadChildren?_map.map.call(this.configLoader.load(o,h),function(U){return h._loadedConfig=U,new UrlSegmentGroup(y,{})}):(0,_of.of)(new UrlSegmentGroup(y,{}));var _match2=match(u,h,y),S=_match2.matched,C=_match2.consumedSegments,R=_match2.lastChild;if(!S)return noMatch(u);var T=y.slice(R),P=this.getChildConfig(o,h);return _mergeMap.mergeMap.call(P,function(U){var A=U.injector,x=U.routes,_split=split(u,C,T,x),I=_split.segmentGroup,E=_split.slicedSegments;if(0===E.length&&I.hasChildren()){var O=_this10.expandChildren(A,x,I);return _map.map.call(O,function(M){return new UrlSegmentGroup(C,M)})}if(0===x.length&&0===E.length)return(0,_of.of)(new UrlSegmentGroup(C,{}));var L=_this10.expandSegment(A,I,x,E,PRIMARY_OUTLET,!0);return _map.map.call(L,function(O){return new UrlSegmentGroup(C.concat(O.segments),O.children)})})}},{key:"getChildConfig",value:function(o,u){var _this11=this;return u.children?(0,_of.of)(new LoadedRouterConfig(u.children,o,null,null)):u.loadChildren?_mergeMap.mergeMap.call(runGuards(o,u),function(h){return h?u._loadedConfig?(0,_of.of)(u._loadedConfig):_map.map.call(_this11.configLoader.load(o,u),function(y){return u._loadedConfig=y,y}):canLoadFails(u)}):(0,_of.of)(new LoadedRouterConfig([],o,null,null))}},{key:"lineralizeSegments",value:function(o,u){for(var h=[],y=u.root;;){if(h=h.concat(y.segments),0===y.numberOfChildren)return(0,_of.of)(h);if(1<y.numberOfChildren||!y.children[PRIMARY_OUTLET])return namedOutletsRedirect(o.redirectTo);y=y.children[PRIMARY_OUTLET]}}},{key:"applyRedirectCommands",value:function(o,u,h){return this.applyRedirectCreatreUrlTree(u,this.urlSerializer.parse(u),o,h)}},{key:"applyRedirectCreatreUrlTree",value:function(o,u,h,y){var S=this.createSegmentGroup(o,u.root,h,y);return new UrlTree(S,this.createQueryParams(u.queryParams,this.urlTree.queryParams),u.fragment)}},{key:"createQueryParams",value:function(o,u){var h={};return forEach(o,function(y,S){h[S]=y.startsWith(":")?u[y.substring(1)]:y}),h}},{key:"createSegmentGroup",value:function(o,u,h,y){var _this12=this,S=this.createSegments(o,u.segments,h,y),C={};return forEach(u.children,function(R,T){C[T]=_this12.createSegmentGroup(o,R,h,y)}),new UrlSegmentGroup(S,C)}},{key:"createSegments",value:function(o,u,h,y){var _this13=this;return u.map(function(S){return S.path.startsWith(":")?_this13.findPosParam(o,S,y):_this13.findOrReturn(S,h)})}},{key:"findPosParam",value:function(o,u,h){var y=h[u.path.substring(1)];if(!y)throw new Error("Cannot redirect to '"+o+"'. Cannot find '"+u.path+"'.");return y}},{key:"findOrReturn",value:function(o,u){var h=0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=u[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var y=_step.value;if(y.path===o.path)return u.splice(h),y;h++}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return o}}]),ApplyRedirects}(),Tree=function(){function Tree(o){_classCallCheck(this,Tree),this._root=o}return _createClass(Tree,[{key:"parent",value:function(o){var u=this.pathFromRoot(o);return 1<u.length?u[u.length-2]:null}},{key:"children",value:function(o){var u=findNode(o,this._root);return u?u.children.map(function(h){return h.value}):[]}},{key:"firstChild",value:function(o){var u=findNode(o,this._root);return u&&0<u.children.length?u.children[0].value:null}},{key:"siblings",value:function(o){var u=findPath(o,this._root,[]);if(2>u.length)return[];var h=u[u.length-2].children.map(function(y){return y.value});return h.filter(function(y){return y!==o})}},{key:"pathFromRoot",value:function(o){return findPath(o,this._root,[]).map(function(u){return u.value})}},{key:"root",get:function(){return this._root.value}}]),Tree}(),TreeNode=function(){function TreeNode(o,u){_classCallCheck(this,TreeNode),this.value=o,this.children=u}return _createClass(TreeNode,[{key:"toString",value:function(){return"TreeNode("+this.value+")"}}]),TreeNode}(),RouterState=function(_Tree){function RouterState(o,u){var _this14;return _classCallCheck(this,RouterState),_this14=_possibleConstructorReturn(this,(RouterState.__proto__||Object.getPrototypeOf(RouterState)).call(this,o)),_this14.snapshot=u,setRouterStateSnapshot(_this14,o),_this14}return _inherits(RouterState,_Tree),_createClass(RouterState,[{key:"toString",value:function(){return this.snapshot.toString()}}]),RouterState}(Tree),ActivatedRoute=function(){function ActivatedRoute(o,u,h,y,S,C,R,T){_classCallCheck(this,ActivatedRoute),this.url=o,this.params=u,this.queryParams=h,this.fragment=y,this.data=S,this.outlet=C,this.component=R,this._futureSnapshot=T}return _createClass(ActivatedRoute,[{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"}},{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}}]),ActivatedRoute}(),ActivatedRouteSnapshot=function(){function ActivatedRouteSnapshot(o,u,h,y,S,C,R,T,P,U,A){_classCallCheck(this,ActivatedRouteSnapshot),this.url=o,this.params=u,this.queryParams=h,this.fragment=y,this.data=S,this.outlet=C,this.component=R,this._routeConfig=T,this._urlSegment=P,this._lastPathIndex=U,this._resolve=A}return _createClass(ActivatedRouteSnapshot,[{key:"toString",value:function(){var o=this.url.map(function(h){return h.toString()}).join("/"),u=this._routeConfig?this._routeConfig.path:"";return"Route(url:'"+o+"', path:'"+u+"')"}},{key:"routeConfig",get:function(){return this._routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}}]),ActivatedRouteSnapshot}(),RouterStateSnapshot=function(_Tree2){function RouterStateSnapshot(o,u){var _this15;return _classCallCheck(this,RouterStateSnapshot),_this15=_possibleConstructorReturn(this,(RouterStateSnapshot.__proto__||Object.getPrototypeOf(RouterStateSnapshot)).call(this,u)),_this15.url=o,setRouterStateSnapshot(_this15,u),_this15}return _inherits(RouterStateSnapshot,_Tree2),_createClass(RouterStateSnapshot,[{key:"toString",value:function(){return serializeNode(this._root)}}]),RouterStateSnapshot}(Tree),Navigation=function(){function Navigation(o,u,h){if(_classCallCheck(this,Navigation),this.isAbsolute=o,this.numberOfDoubleDots=u,this.commands=h,o&&0<h.length&&isMatrixParams(h[0]))throw new Error("Root segment cannot have matrix parameters");var y=h.find(function(S){return"object"==("undefined"==typeof S?"undefined":_typeof(S))&&null!=S&&S.outlets});if(y&&y!==last(h))throw new Error("{outlets:{}} has to be the last command")}return _createClass(Navigation,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),Navigation}(),Position=function Position(o,u,h){_classCallCheck(this,Position),this.segmentGroup=o,this.processChildren=u,this.index=h},NoMatch$1=function NoMatch$1(){_classCallCheck(this,NoMatch$1)},Recognizer=function(){function Recognizer(o,u,h,y){_classCallCheck(this,Recognizer),this.rootComponentType=o,this.config=u,this.urlTree=h,this.url=y}return _createClass(Recognizer,[{key:"recognize",value:function(){try{var o=split$1(this.urlTree.root,[],[],this.config).segmentGroup,u=this.processSegmentGroup(this.config,o,PRIMARY_OUTLET),h=new ActivatedRouteSnapshot([],Object.freeze({}),Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,{},PRIMARY_OUTLET,this.rootComponentType,null,this.urlTree.root,(-1),{}),y=new TreeNode(h,u),S=new RouterStateSnapshot(this.url,y);return this.inheriteParamsAndData(S._root),(0,_of.of)(S)}catch(o){return new _Observable.Observable(function(u){return u.error(o)})}}},{key:"inheriteParamsAndData",value:function(o){var _this16=this,u=o.value,h=inheritedParamsDataResolve(u);u.params=Object.freeze(h.params),u.data=Object.freeze(h.data),o.children.forEach(function(y){return _this16.inheriteParamsAndData(y)})}},{key:"processSegmentGroup",value:function(o,u,h){return 0===u.segments.length&&u.hasChildren()?this.processChildren(o,u):this.processSegment(o,u,u.segments,h)}},{key:"processChildren",value:function(o,u){var _this17=this,h=mapChildrenIntoArray(u,function(y,S){return _this17.processSegmentGroup(o,y,S)});return checkOutletNameUniqueness(h),sortActivatedRouteSnapshots(h),h}},{key:"processSegment",value:function(o,u,h,y){var _iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _step7,_iterator7=o[Symbol.iterator]();!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){var S=_step7.value;try{return this.processSegmentAgainstRoute(S,u,h,y)}catch(C){if(!(C instanceof NoMatch$1))throw C}}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{!_iteratorNormalCompletion7&&_iterator7.return&&_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}if(this.noLeftoversInUrl(u,h,y))return[];throw new NoMatch$1}},{key:"noLeftoversInUrl",value:function(o,u,h){return 0===u.length&&!o.children[h]}},{key:"processSegmentAgainstRoute",value:function(o,u,h,y){if(o.redirectTo)throw new NoMatch$1;if((o.outlet?o.outlet:PRIMARY_OUTLET)!==y)throw new NoMatch$1;if("**"===o.path){var _I=0<h.length?last(h).parameters:{},E=new ActivatedRouteSnapshot(h,_I,Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,getData(o),y,o.component,o,getSourceSegmentGroup(u),getPathIndexShift(u)+h.length,getResolve(o));return[new TreeNode(E,[])]}var _match$=match$1(u,o,h),S=_match$.consumedSegments,C=_match$.parameters,R=_match$.lastChild,T=h.slice(R),P=getChildConfig(o),_split$=split$1(u,S,T,P),U=_split$.segmentGroup,A=_split$.slicedSegments,x=new ActivatedRouteSnapshot(S,C,Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,getData(o),y,o.component,o,getSourceSegmentGroup(u),getPathIndexShift(u)+S.length,getResolve(o));if(0===A.length&&U.hasChildren()){var _I2=this.processChildren(P,U);return[new TreeNode(x,_I2)]}if(0===P.length&&0===A.length)return[new TreeNode(x,[])];var I=this.processSegment(P,U,A,PRIMARY_OUTLET);return[new TreeNode(x,I)]}}]),Recognizer}(),RouterOutletMap=function(){function RouterOutletMap(){_classCallCheck(this,RouterOutletMap),this._outlets={}}return _createClass(RouterOutletMap,[{key:"registerOutlet",value:function(o,u){this._outlets[o]=u}},{key:"removeOutlet",value:function(o){this._outlets[o]=void 0}}]),RouterOutletMap}(),UrlHandlingStrategy=function(){function UrlHandlingStrategy(){_classCallCheck(this,UrlHandlingStrategy)}return _createClass(UrlHandlingStrategy,[{key:"shouldProcessUrl",value:function(){}},{key:"extract",value:function(){}},{key:"merge",value:function(){}}]),UrlHandlingStrategy}(),DefaultUrlHandlingStrategy=function(){function DefaultUrlHandlingStrategy(){_classCallCheck(this,DefaultUrlHandlingStrategy)}return _createClass(DefaultUrlHandlingStrategy,[{key:"shouldProcessUrl",value:function(){return!0}},{key:"extract",value:function(o){return o}},{key:"merge",value:function(o){return o}}]),DefaultUrlHandlingStrategy}(),DefaultRouteReuseStrategy=function(){function DefaultRouteReuseStrategy(){_classCallCheck(this,DefaultRouteReuseStrategy)}return _createClass(DefaultRouteReuseStrategy,[{key:"shouldDetach",value:function(){return!1}},{key:"store",value:function(){}},{key:"shouldAttach",value:function(){return!1}},{key:"retrieve",value:function(){return null}},{key:"shouldReuseRoute",value:function(o,u){return o.routeConfig===u.routeConfig}}]),DefaultRouteReuseStrategy}(),Router=function(){function Router(o,u,h,y,S,C,R,T){var _this18=this;_classCallCheck(this,Router),this.rootComponentType=o,this.urlSerializer=u,this.outletMap=h,this.location=y,this.injector=S,this.config=T,this.navigations=new _BehaviorSubject.BehaviorSubject(null),this.routerEvents=new _Subject.Subject,this.navigationId=0,this.errorHandler=defaultErrorHandler,this.navigated=!1,this.urlHandlingStrategy=new DefaultUrlHandlingStrategy,this.routeReuseStrategy=new DefaultRouteReuseStrategy,this.resetConfig(T),this.currentUrlTree=createEmptyUrlTree(),this.rawUrlTree=this.currentUrlTree,this.configLoader=new RouterConfigLoader(C,R,function(A){return _this18.triggerEvent(new RouteConfigLoadStart(A))},function(A){return _this18.triggerEvent(new RouteConfigLoadEnd(A))}),this.currentRouterState=createEmptyState(this.currentUrlTree,this.rootComponentType),this.processNavigations()}return _createClass(Router,[{key:"resetRootComponentType",value:function(o){this.rootComponentType=o,this.currentRouterState.root.component=this.rootComponentType}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var _this19=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(Zone.current.wrap(function(o){var u=_this19.urlSerializer.parse(o.url),h="popstate"===o.type?"popstate":"hashchange";setTimeout(function(){_this19.scheduleNavigation(u,h,{replaceUrl:!0})},0)})))}},{key:"triggerEvent",value:function(o){this.routerEvents.next(o)}},{key:"resetConfig",value:function(o){validateConfig(o),this.config=o}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}},{key:"createUrlTree",value:function(o){var _ref4=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=_ref4.relativeTo,h=_ref4.queryParams,y=_ref4.fragment,S=_ref4.preserveQueryParams,C=_ref4.queryParamsHandling,R=_ref4.preserveFragment;(0,_core.isDevMode)()&&S&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var T=u||this.routerState.root,P=R?this.currentUrlTree.fragment:y,U=null;return U=C?"merge"===C?merge(this.currentUrlTree.queryParams,h):"preserve"===C?this.currentUrlTree.queryParams:h:S?this.currentUrlTree.queryParams:h,_createUrlTree(T,this.currentUrlTree,o,U,P)}},{key:"navigateByUrl",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},h=o instanceof UrlTree?o:this.parseUrl(o),y=this.urlHandlingStrategy.merge(h,this.rawUrlTree);return this.scheduleNavigation(y,"imperative",u)}},{key:"navigate",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return validateCommands(o),"object"==_typeof(u.queryParams)&&null!==u.queryParams&&(u.queryParams=this.removeEmptyProps(u.queryParams)),this.navigateByUrl(this.createUrlTree(o,u),u)}},{key:"serializeUrl",value:function(o){return this.urlSerializer.serialize(o)}},{key:"parseUrl",value:function(o){return this.urlSerializer.parse(o)}},{key:"isActive",value:function(o,u){if(o instanceof UrlTree)return containsTree(this.currentUrlTree,o,u);var h=this.urlSerializer.parse(o);return containsTree(this.currentUrlTree,h,u)}},{key:"removeEmptyProps",value:function(o){return Object.keys(o).reduce(function(u,h){var y=o[h];return null!==y&&void 0!==y&&(u[h]=y),u},{})}},{key:"processNavigations",value:function(){var _this20=this;_concatMap.concatMap.call(this.navigations,function(o){return o?(_this20.executeScheduledNavigation(o),o.promise.catch(function(){})):(0,_of.of)(null)}).subscribe(function(){})}},{key:"scheduleNavigation",value:function(o,u,h){var y=this.navigations.value;if(y&&"imperative"!==u&&"imperative"===y.source&&y.rawUrl.toString()===o.toString())return null;if(y&&"hashchange"==u&&"popstate"===y.source&&y.rawUrl.toString()===o.toString())return null;var S=null,C=null,R=new Promise(function(P,U){S=P,C=U}),T=++this.navigationId;return this.navigations.next({id:T,source:u,rawUrl:o,extras:h,resolve:S,reject:C,promise:R}),R.catch(function(P){return Promise.reject(P)})}},{key:"executeScheduledNavigation",value:function(_ref5){var _this21=this,o=_ref5.id,u=_ref5.rawUrl,h=_ref5.extras,y=_ref5.resolve,S=_ref5.reject,C=this.urlHandlingStrategy.extract(u),R=!this.navigated||C.toString()!==this.currentUrlTree.toString();R&&this.urlHandlingStrategy.shouldProcessUrl(u)?(this.routerEvents.next(new NavigationStart(o,this.serializeUrl(C))),Promise.resolve().then(function(){return _this21.runNavigate(C,u,h.skipLocationChange,h.replaceUrl,o,null)}).then(y,S)):R&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)?(this.routerEvents.next(new NavigationStart(o,this.serializeUrl(C))),Promise.resolve().then(function(){return _this21.runNavigate(C,u,!1,!1,o,createEmptyState(C,_this21.rootComponentType).snapshot)}).then(y,S)):(this.rawUrlTree=u,y(null))}},{key:"runNavigate",value:function(o,u,h,y,S,C){var _this22=this;return S===this.navigationId?new Promise(function(R,T){var P=void 0;if(C)P=(0,_of.of)({appliedUrl:o,snapshot:C});else{var z=applyRedirects(_this22.injector,_this22.configLoader,_this22.urlSerializer,o,_this22.config);P=_mergeMap.mergeMap.call(z,function(W){return _map.map.call(recognize(_this22.rootComponentType,_this22.config,W,_this22.serializeUrl(W)),function(w){return _this22.routerEvents.next(new RoutesRecognized(S,_this22.serializeUrl(o),_this22.serializeUrl(W),w)),{appliedUrl:W,snapshot:w}})})}var U=void 0,A=_map.map.call(P,function(_ref6){var z=_ref6.appliedUrl,W=_ref6.snapshot;return U=new PreActivation(W,_this22.currentRouterState.snapshot,_this22.injector),U.traverse(_this22.outletMap),{appliedUrl:z,snapshot:W}}),x=_mergeMap.mergeMap.call(A,function(_ref7){var z=_ref7.appliedUrl,W=_ref7.snapshot;return _this22.navigationId===S?_map.map.call(U.checkGuards(),function(w){return{appliedUrl:z,snapshot:W,shouldActivate:w}}):(0,_of.of)(!1)}),I=_mergeMap.mergeMap.call(x,function(z){return _this22.navigationId===S?z.shouldActivate?_map.map.call(U.resolveData(),function(){return z}):(0,_of.of)(z):(0,_of.of)(!1)}),E=_map.map.call(I,function(_ref8){var z=_ref8.appliedUrl,W=_ref8.snapshot,w=_ref8.shouldActivate;if(w){var G=createRouterState(_this22.routeReuseStrategy,W,_this22.currentRouterState);return{appliedUrl:z,state:G,shouldActivate:w}}return{appliedUrl:z,state:null,shouldActivate:w}}),L=void 0,O=_this22.currentRouterState,M=_this22.currentUrlTree;E.forEach(function(_ref9){var z=_ref9.appliedUrl,W=_ref9.state,w=_ref9.shouldActivate;if(!w||S!==_this22.navigationId)return void(L=!1);
if(_this22.currentUrlTree=z,_this22.rawUrlTree=_this22.urlHandlingStrategy.merge(_this22.currentUrlTree,u),_this22.currentRouterState=W,!h){var G=_this22.urlSerializer.serialize(_this22.rawUrlTree);_this22.location.isCurrentPathEqualTo(G)||y?_this22.location.replaceState(G):_this22.location.go(G)}new ActivateRoutes(_this22.routeReuseStrategy,W,O).activate(_this22.outletMap),L=!0}).then(function(){L?(_this22.navigated=!0,_this22.routerEvents.next(new NavigationEnd(S,_this22.serializeUrl(o),_this22.serializeUrl(_this22.currentUrlTree))),R(!0)):(_this22.resetUrlToCurrentUrlTree(),_this22.routerEvents.next(new NavigationCancel(S,_this22.serializeUrl(o),"")),R(!1))},function(z){if(isNavigationCancelingError(z))_this22.resetUrlToCurrentUrlTree(),_this22.navigated=!0,_this22.routerEvents.next(new NavigationCancel(S,_this22.serializeUrl(o),z.message)),R(!1);else{_this22.routerEvents.next(new NavigationError(S,_this22.serializeUrl(o),z));try{R(_this22.errorHandler(z))}catch(W){T(W)}}_this22.currentRouterState=O,_this22.currentUrlTree=M,_this22.rawUrlTree=_this22.urlHandlingStrategy.merge(_this22.currentUrlTree,u),_this22.location.replaceState(_this22.serializeUrl(_this22.rawUrlTree))})}):(this.location.go(this.urlSerializer.serialize(this.currentUrlTree)),this.routerEvents.next(new NavigationCancel(S,this.serializeUrl(o),"Navigation ID "+S+" is not equal to the current navigation id "+this.navigationId)),Promise.resolve(!1))}},{key:"resetUrlToCurrentUrlTree",value:function(){var o=this.urlSerializer.serialize(this.rawUrlTree);this.location.replaceState(o)}},{key:"routerState",get:function(){return this.currentRouterState}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"events",get:function(){return this.routerEvents}}]),Router}(),CanActivate=function(){function CanActivate(o){_classCallCheck(this,CanActivate),this.path=o}return _createClass(CanActivate,[{key:"route",get:function(){return this.path[this.path.length-1]}}]),CanActivate}(),CanDeactivate=function CanDeactivate(o,u){_classCallCheck(this,CanDeactivate),this.component=o,this.route=u},PreActivation=function(){function PreActivation(o,u,h){_classCallCheck(this,PreActivation),this.future=o,this.curr=u,this.injector=h,this.checks=[]}return _createClass(PreActivation,[{key:"traverse",value:function(o){var u=this.future._root,h=this.curr?this.curr._root:null;this.traverseChildRoutes(u,h,o,[u.value])}},{key:"checkGuards",value:function(){var _this23=this;if(0===this.checks.length)return(0,_of.of)(!0);var o=(0,_from.from)(this.checks),u=_mergeMap.mergeMap.call(o,function(h){if(h instanceof CanActivate)return andObservables((0,_from.from)([_this23.runCanActivateChild(h.path),_this23.runCanActivate(h.route)]));if(h instanceof CanDeactivate){var y=h;return _this23.runCanDeactivate(y.component,y.route)}throw new Error("Cannot be reached")});return _every.every.call(u,function(h){return!0===h})}},{key:"resolveData",value:function(){var _this24=this;if(0===this.checks.length)return(0,_of.of)(null);var o=(0,_from.from)(this.checks),u=_concatMap.concatMap.call(o,function(h){return h instanceof CanActivate?_this24.runResolve(h.route):(0,_of.of)(null)});return _reduce.reduce.call(u,function(h){return h})}},{key:"traverseChildRoutes",value:function(o,u,h,y){var _this25=this,S=nodeChildrenAsMap(u);o.children.forEach(function(C){_this25.traverseRoutes(C,S[C.value.outlet],h,y.concat([C.value])),delete S[C.value.outlet]}),forEach(S,function(C,R){return _this25.deactiveRouteAndItsChildren(C,h._outlets[R])})}},{key:"traverseRoutes",value:function(o,u,h,y){var S=o.value,C=u?u.value:null,R=h?h._outlets[o.value.outlet]:null;C&&S._routeConfig===C._routeConfig?(this.shouldRunGuardsAndResolvers(C,S,S._routeConfig.runGuardsAndResolvers)?this.checks.push(new CanDeactivate(R.component,C),new CanActivate(y)):(S.data=C.data,S._resolvedData=C._resolvedData),S.component?this.traverseChildRoutes(o,u,R?R.outletMap:null,y):this.traverseChildRoutes(o,u,h,y)):(C&&this.deactiveRouteAndItsChildren(u,R),this.checks.push(new CanActivate(y)),S.component?this.traverseChildRoutes(o,null,R?R.outletMap:null,y):this.traverseChildRoutes(o,null,h,y))}},{key:"shouldRunGuardsAndResolvers",value:function(o,u,h){switch(h){case"always":return!0;case"paramsOrQueryParamsChange":return!equalParamsAndUrlSegments(o,u)||!shallowEqual(o.queryParams,u.queryParams);case"paramsChange":default:return!equalParamsAndUrlSegments(o,u)}}},{key:"deactiveRouteAndItsChildren",value:function(o,u){var _this26=this,h=nodeChildrenAsMap(o),y=o.value;forEach(h,function(S,C){y.component?u?_this26.deactiveRouteAndItsChildren(S,u.outletMap._outlets[C]):_this26.deactiveRouteAndItsChildren(S,null):_this26.deactiveRouteAndItsChildren(S,u)}),y.component&&u&&u.isActivated?this.checks.push(new CanDeactivate(u.component,y)):this.checks.push(new CanDeactivate(null,y))}},{key:"runCanActivate",value:function(o){var _this27=this,u=o._routeConfig?o._routeConfig.canActivate:null;if(!u||0===u.length)return(0,_of.of)(!0);var h=_map.map.call((0,_from.from)(u),function(y){var S=_this27.getToken(y,o),C=void 0;return C=wrapIntoObservable(S.canActivate?S.canActivate(o,_this27.future):S(o,_this27.future)),_first.first.call(C)});return andObservables(h)}},{key:"runCanActivateChild",value:function(o){var _this28=this,u=o[o.length-1],h=o.slice(0,o.length-1).reverse().map(function(y){return _this28.extractCanActivateChild(y)}).filter(function(y){return null!==y});return andObservables(_map.map.call((0,_from.from)(h),function(y){var S=_map.map.call((0,_from.from)(y.guards),function(C){var R=_this28.getToken(C,y.node),T=void 0;return T=wrapIntoObservable(R.canActivateChild?R.canActivateChild(u,_this28.future):R(u,_this28.future)),_first.first.call(T)});return andObservables(S)}))}},{key:"extractCanActivateChild",value:function(o){var u=o._routeConfig?o._routeConfig.canActivateChild:null;return u&&0!==u.length?{node:o,guards:u}:null}},{key:"runCanDeactivate",value:function(o,u){var _this29=this,h=u&&u._routeConfig?u._routeConfig.canDeactivate:null;if(!h||0===h.length)return(0,_of.of)(!0);var y=_mergeMap.mergeMap.call((0,_from.from)(h),function(S){var C=_this29.getToken(S,u),R=void 0;return R=wrapIntoObservable(C.canDeactivate?C.canDeactivate(o,u,_this29.curr,_this29.future):C(o,u,_this29.curr,_this29.future)),_first.first.call(R)});return _every.every.call(y,function(S){return!0===S})}},{key:"runResolve",value:function(o){var u=o._resolve;return _map.map.call(this.resolveNode(u,o),function(h){return o._resolvedData=h,o.data=merge(o.data,inheritedParamsDataResolve(o).resolve),null})}},{key:"resolveNode",value:function(o,u){var _this30=this;return waitForMap(o,function(h,y){var S=_this30.getToken(y,u);return wrapIntoObservable(S.resolve?S.resolve(u,_this30.future):S(u,_this30.future))})}},{key:"getToken",value:function(o,u){var h=closestLoadedConfig(u),y=h?h.injector:this.injector;return y.get(o)}}]),PreActivation}(),ActivateRoutes=function(){function ActivateRoutes(o,u,h){_classCallCheck(this,ActivateRoutes),this.routeReuseStrategy=o,this.futureState=u,this.currState=h}return _createClass(ActivateRoutes,[{key:"activate",value:function(o){var u=this.futureState._root,h=this.currState?this.currState._root:null;this.deactivateChildRoutes(u,h,o),advanceActivatedRoute(this.futureState.root),this.activateChildRoutes(u,h,o)}},{key:"deactivateChildRoutes",value:function(o,u,h){var _this31=this,y=nodeChildrenAsMap(u);o.children.forEach(function(S){_this31.deactivateRoutes(S,y[S.value.outlet],h),delete y[S.value.outlet]}),forEach(y,function(S){return _this31.deactiveRouteAndItsChildren(S,h)})}},{key:"activateChildRoutes",value:function(o,u,h){var _this32=this,y=nodeChildrenAsMap(u);o.children.forEach(function(S){_this32.activateRoutes(S,y[S.value.outlet],h)})}},{key:"deactivateRoutes",value:function(o,u,h){var y=o.value,S=u?u.value:null;if(y!==S)S&&this.deactiveRouteAndItsChildren(u,h);else if(y.component){var C=getOutlet(h,y);this.deactivateChildRoutes(o,u,C.outletMap)}else this.deactivateChildRoutes(o,u,h)}},{key:"activateRoutes",value:function(o,u,h){var y=o.value,S=u?u.value:null;if(y===S)if(advanceActivatedRoute(y),y.component){var C=getOutlet(h,y);this.activateChildRoutes(o,u,C.outletMap)}else this.activateChildRoutes(o,u,h);else if(y.component){advanceActivatedRoute(y);var _C2=getOutlet(h,o.value);if(this.routeReuseStrategy.shouldAttach(y.snapshot)){var R=this.routeReuseStrategy.retrieve(y.snapshot);this.routeReuseStrategy.store(y.snapshot,null),_C2.attach(R.componentRef,R.route.value),advanceActivatedRouteNodeAndItsChildren(R.route)}else{var _R=new RouterOutletMap;this.placeComponentIntoOutlet(_R,y,_C2),this.activateChildRoutes(o,null,_R)}}else advanceActivatedRoute(y),this.activateChildRoutes(o,null,h)}},{key:"placeComponentIntoOutlet",value:function(o,u,h){var y=[{provide:ActivatedRoute,useValue:u},{provide:RouterOutletMap,useValue:o}],S=parentLoadedConfig(u.snapshot),C=null,R=null;S?(R=S.injectorFactory(h.locationInjector),C=S.factoryResolver,y.push({provide:_core.ComponentFactoryResolver,useValue:C})):(R=h.locationInjector,C=h.locationFactoryResolver),h.activate(u,C,R,_core.ReflectiveInjector.resolve(y),o)}},{key:"deactiveRouteAndItsChildren",value:function(o,u){this.routeReuseStrategy.shouldDetach(o.value.snapshot)?this.detachAndStoreRouteSubtree(o,u):this.deactiveRouteAndOutlet(o,u)}},{key:"detachAndStoreRouteSubtree",value:function(o,u){var h=getOutlet(u,o.value),y=h.detach();this.routeReuseStrategy.store(o.value.snapshot,{componentRef:y,route:o})}},{key:"deactiveRouteAndOutlet",value:function(o,u){var _this33=this,h=nodeChildrenAsMap(o),y=null;try{y=getOutlet(u,o.value)}catch(C){return}var S=y.outletMap;forEach(h,function(C){o.value.component?_this33.deactiveRouteAndItsChildren(C,S):_this33.deactiveRouteAndItsChildren(C,u)}),y&&y.isActivated&&y.deactivate()}}]),ActivateRoutes}(),RouterLink=function(){function RouterLink(o,u,h,y,S){_classCallCheck(this,RouterLink),this.router=o,this.route=u,this.commands=[],null==h&&y.setElementAttribute(S.nativeElement,"tabindex","0")}return _createClass(RouterLink,[{key:"onClick",value:function(){var o={skipLocationChange:attrBoolValue(this.skipLocationChange),replaceUrl:attrBoolValue(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,o),!0}},{key:"routerLink",set:function(o){this.commands=null==o?[]:Array.isArray(o)?o:[o]}},{key:"preserveQueryParams",set:function(o){(0,_core.isDevMode)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=o}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:attrBoolValue(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:attrBoolValue(this.preserveFragment)})}}]),RouterLink}();RouterLink.decorators=[{type:_core.Directive,args:[{selector:":not(a)[routerLink]"}]}],RouterLink.ctorParameters=function(){return[{type:Router},{type:ActivatedRoute},{type:void 0,decorators:[{type:_core.Attribute,args:["tabindex"]}]},{type:_core.Renderer},{type:_core.ElementRef}]},RouterLink.propDecorators={queryParams:[{type:_core.Input}],fragment:[{type:_core.Input}],queryParamsHandling:[{type:_core.Input}],preserveFragment:[{type:_core.Input}],skipLocationChange:[{type:_core.Input}],replaceUrl:[{type:_core.Input}],routerLink:[{type:_core.Input}],preserveQueryParams:[{type:_core.Input}],onClick:[{type:_core.HostListener,args:["click"]}]};var RouterLinkWithHref=function(){function RouterLinkWithHref(o,u,h){var _this34=this;_classCallCheck(this,RouterLinkWithHref),this.router=o,this.route=u,this.locationStrategy=h,this.commands=[],this.subscription=o.events.subscribe(function(y){y instanceof NavigationEnd&&_this34.updateTargetUrlAndHref()})}return _createClass(RouterLinkWithHref,[{key:"ngOnChanges",value:function(){this.updateTargetUrlAndHref()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(o,u,h){if(0!==o||u||h)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var y={skipLocationChange:attrBoolValue(this.skipLocationChange),replaceUrl:attrBoolValue(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,y),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"routerLink",set:function(o){this.commands=null==o?[]:Array.isArray(o)?o:[o]}},{key:"preserveQueryParams",set:function(o){(0,_core.isDevMode)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=o}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:attrBoolValue(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:attrBoolValue(this.preserveFragment)})}}]),RouterLinkWithHref}();RouterLinkWithHref.decorators=[{type:_core.Directive,args:[{selector:"a[routerLink]"}]}],RouterLinkWithHref.ctorParameters=function(){return[{type:Router},{type:ActivatedRoute},{type:_common.LocationStrategy}]},RouterLinkWithHref.propDecorators={target:[{type:_core.HostBinding,args:["attr.target"]},{type:_core.Input}],queryParams:[{type:_core.Input}],fragment:[{type:_core.Input}],queryParamsHandling:[{type:_core.Input}],preserveFragment:[{type:_core.Input}],skipLocationChange:[{type:_core.Input}],replaceUrl:[{type:_core.Input}],href:[{type:_core.HostBinding}],routerLink:[{type:_core.Input}],preserveQueryParams:[{type:_core.Input}],onClick:[{type:_core.HostListener,args:["click",["$event.button","$event.ctrlKey","$event.metaKey"]]}]};var RouterLinkActive=function(){function RouterLinkActive(o,u,h,y){var _this35=this;_classCallCheck(this,RouterLinkActive),this.router=o,this.element=u,this.renderer=h,this.cdr=y,this.classes=[],this.active=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=o.events.subscribe(function(S){S instanceof NavigationEnd&&_this35.update()})}return _createClass(RouterLinkActive,[{key:"ngAfterContentInit",value:function(){var _this36=this;this.links.changes.subscribe(function(){return _this36.update()}),this.linksWithHrefs.changes.subscribe(function(){return _this36.update()}),this.update()}},{key:"ngOnChanges",value:function(){this.update()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"update",value:function(){var _this37=this;if(this.links&&this.linksWithHrefs&&this.router.navigated){var o=this.hasActiveLinks();this.active!==o&&(this.active=o,this.classes.forEach(function(u){return _this37.renderer.setElementClass(_this37.element.nativeElement,u,o)}),this.cdr.detectChanges())}}},{key:"isLinkActive",value:function(o){var _this38=this;return function(u){return o.isActive(u.urlTree,_this38.routerLinkActiveOptions.exact)}}},{key:"hasActiveLinks",value:function(){return this.links.some(this.isLinkActive(this.router))||this.linksWithHrefs.some(this.isLinkActive(this.router))}},{key:"isActive",get:function(){return this.active}},{key:"routerLinkActive",set:function(o){var u=Array.isArray(o)?o:o.split(" ");this.classes=u.filter(function(h){return!!h})}}]),RouterLinkActive}();RouterLinkActive.decorators=[{type:_core.Directive,args:[{selector:"[routerLinkActive]",exportAs:"routerLinkActive"}]}],RouterLinkActive.ctorParameters=function(){return[{type:Router},{type:_core.ElementRef},{type:_core.Renderer},{type:_core.ChangeDetectorRef}]},RouterLinkActive.propDecorators={links:[{type:_core.ContentChildren,args:[RouterLink,{descendants:!0}]}],linksWithHrefs:[{type:_core.ContentChildren,args:[RouterLinkWithHref,{descendants:!0}]}],routerLinkActiveOptions:[{type:_core.Input}],routerLinkActive:[{type:_core.Input}]};var RouterOutlet=function(){function RouterOutlet(o,u,h,y){_classCallCheck(this,RouterOutlet),this.parentOutletMap=o,this.location=u,this.resolver=h,this.name=y,this.activateEvents=new _core.EventEmitter,this.deactivateEvents=new _core.EventEmitter,o.registerOutlet(y?y:PRIMARY_OUTLET,this)}return _createClass(RouterOutlet,[{key:"ngOnDestroy",value:function(){this.parentOutletMap.removeOutlet(this.name?this.name:PRIMARY_OUTLET)}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var o=this.activated;return this.activated=null,this._activatedRoute=null,o}},{key:"attach",value:function(o,u){this.activated=o,this._activatedRoute=u,this.location.insert(o.hostView)}},{key:"deactivate",value:function(){if(this.activated){var o=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(o)}}},{key:"activate",value:function(o,u,h,y,S){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this.outletMap=S,this._activatedRoute=o;var C=o._futureSnapshot,R=C._routeConfig.component,T=u.resolveComponentFactory(R),P=_core.ReflectiveInjector.fromResolvedProviders(y,h);this.activated=this.location.createComponent(T,this.location.length,P,[]),this.activated.changeDetectorRef.detectChanges(),this.activateEvents.emit(this.activated.instance)}},{key:"locationInjector",get:function(){return this.location.injector}},{key:"locationFactoryResolver",get:function(){return this.resolver}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}}]),RouterOutlet}();RouterOutlet.decorators=[{type:_core.Directive,args:[{selector:"router-outlet"}]}],RouterOutlet.ctorParameters=function(){return[{type:RouterOutletMap},{type:_core.ViewContainerRef},{type:_core.ComponentFactoryResolver},{type:void 0,decorators:[{type:_core.Attribute,args:["name"]}]}]},RouterOutlet.propDecorators={activateEvents:[{type:_core.Output,args:["activate"]}],deactivateEvents:[{type:_core.Output,args:["deactivate"]}]};var RouteReuseStrategy=function(){function RouteReuseStrategy(){_classCallCheck(this,RouteReuseStrategy)}return _createClass(RouteReuseStrategy,[{key:"shouldDetach",value:function(){}},{key:"store",value:function(){}},{key:"shouldAttach",value:function(){}},{key:"retrieve",value:function(){}},{key:"shouldReuseRoute",value:function(){}}]),RouteReuseStrategy}(),PreloadingStrategy=function(){function PreloadingStrategy(){_classCallCheck(this,PreloadingStrategy)}return _createClass(PreloadingStrategy,[{key:"preload",value:function(){}}]),PreloadingStrategy}(),PreloadAllModules=function(){function PreloadAllModules(){_classCallCheck(this,PreloadAllModules)}return _createClass(PreloadAllModules,[{key:"preload",value:function(o,u){return _catch2._catch.call(u(),function(){return(0,_of.of)(null)})}}]),PreloadAllModules}(),NoPreloading=function(){function NoPreloading(){_classCallCheck(this,NoPreloading)}return _createClass(NoPreloading,[{key:"preload",value:function(){return(0,_of.of)(null)}}]),NoPreloading}(),RouterPreloader=function(){function RouterPreloader(o,u,h,y,S){_classCallCheck(this,RouterPreloader),this.router=o,this.injector=y,this.preloadingStrategy=S,this.loader=new RouterConfigLoader(u,h,function(T){return o.triggerEvent(new RouteConfigLoadStart(T))},function(T){return o.triggerEvent(new RouteConfigLoadEnd(T))})}return _createClass(RouterPreloader,[{key:"setUpPreloading",value:function(){var _this39=this,o=_filter.filter.call(this.router.events,function(u){return u instanceof NavigationEnd});this.subscription=_concatMap.concatMap.call(o,function(){return _this39.preload()}).subscribe(function(){})}},{key:"preload",value:function(){return this.processRoutes(this.injector,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"processRoutes",value:function(o,u){var h=[],_iteratorNormalCompletion10=!0,_didIteratorError10=!1,_iteratorError10=void 0;try{for(var _step10,_iterator10=u[Symbol.iterator]();!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=!0){var y=_step10.value;if(y.loadChildren&&!y.canLoad&&y._loadedConfig){var S=y._loadedConfig;h.push(this.processRoutes(S.injector,S.routes))}else y.loadChildren&&!y.canLoad?h.push(this.preloadConfig(o,y)):y.children&&h.push(this.processRoutes(o,y.children))}}catch(err){_didIteratorError10=!0,_iteratorError10=err}finally{try{!_iteratorNormalCompletion10&&_iterator10.return&&_iterator10.return()}finally{if(_didIteratorError10)throw _iteratorError10}}return _mergeAll.mergeAll.call((0,_from.from)(h))}},{key:"preloadConfig",value:function(o,u){var _this40=this;return this.preloadingStrategy.preload(u,function(){var h=_this40.loader.load(o,u);return _mergeMap.mergeMap.call(h,function(y){return u._loadedConfig=y,_this40.processRoutes(y.injector,y.routes)})})}}]),RouterPreloader}();RouterPreloader.decorators=[{type:_core.Injectable}],RouterPreloader.ctorParameters=function(){return[{type:Router},{type:_core.NgModuleFactoryLoader},{type:_core.Compiler},{type:_core.Injector},{type:PreloadingStrategy}]};var ROUTER_DIRECTIVES=[RouterOutlet,RouterLink,RouterLinkWithHref,RouterLinkActive],ROUTER_CONFIGURATION=new _core.InjectionToken("ROUTER_CONFIGURATION"),ROUTER_FORROOT_GUARD=new _core.InjectionToken("ROUTER_FORROOT_GUARD"),ROUTER_PROVIDERS=[_common.Location,{provide:UrlSerializer,useClass:DefaultUrlSerializer},{provide:Router,useFactory:setupRouter,deps:[_core.ApplicationRef,UrlSerializer,RouterOutletMap,_common.Location,_core.Injector,_core.NgModuleFactoryLoader,_core.Compiler,ROUTES,ROUTER_CONFIGURATION,[UrlHandlingStrategy,new _core.Optional],[RouteReuseStrategy,new _core.Optional]]},RouterOutletMap,{provide:ActivatedRoute,useFactory:rootRoute,deps:[Router]},{provide:_core.NgModuleFactoryLoader,useClass:_core.SystemJsNgModuleLoader},RouterPreloader,NoPreloading,PreloadAllModules,{provide:ROUTER_CONFIGURATION,useValue:{enableTracing:!1}}],RouterModule=function(){function RouterModule(){_classCallCheck(this,RouterModule)}return _createClass(RouterModule,null,[{key:"forRoot",value:function(o,u){return{ngModule:RouterModule,providers:[ROUTER_PROVIDERS,provideRoutes(o),{provide:ROUTER_FORROOT_GUARD,useFactory:provideForRootGuard,deps:[[Router,new _core.Optional,new _core.SkipSelf]]},{provide:ROUTER_CONFIGURATION,useValue:u?u:{}},{provide:_common.LocationStrategy,useFactory:provideLocationStrategy,deps:[_common.PlatformLocation,[new _core.Inject(_common.APP_BASE_HREF),new _core.Optional],ROUTER_CONFIGURATION]},{provide:PreloadingStrategy,useExisting:u&&u.preloadingStrategy?u.preloadingStrategy:NoPreloading},{provide:_core.NgProbeToken,multi:!0,useFactory:routerNgProbeToken},provideRouterInitializer()]}}},{key:"forChild",value:function(o){return{ngModule:RouterModule,providers:[provideRoutes(o)]}}}]),RouterModule}();RouterModule.decorators=[{type:_core.NgModule,args:[{declarations:ROUTER_DIRECTIVES,exports:ROUTER_DIRECTIVES}]}],RouterModule.ctorParameters=function(){return[{type:void 0,decorators:[{type:_core.Optional},{type:_core.Inject,args:[ROUTER_FORROOT_GUARD]}]}]};var ROUTER_INITIALIZER=new _core.InjectionToken("Router Initializer"),VERSION=new _core.Version("4.0.0-rc.1");exports.RouterLink=RouterLink,exports.RouterLinkWithHref=RouterLinkWithHref,exports.RouterLinkActive=RouterLinkActive,exports.RouterOutlet=RouterOutlet,exports.NavigationCancel=NavigationCancel,exports.NavigationEnd=NavigationEnd,exports.NavigationError=NavigationError,exports.NavigationStart=NavigationStart,exports.RouteConfigLoadEnd=RouteConfigLoadEnd,exports.RouteConfigLoadStart=RouteConfigLoadStart,exports.RoutesRecognized=RoutesRecognized,exports.RouteReuseStrategy=RouteReuseStrategy,exports.Router=Router,exports.ROUTES=ROUTES,exports.ROUTER_CONFIGURATION=ROUTER_CONFIGURATION,exports.ROUTER_INITIALIZER=ROUTER_INITIALIZER,exports.RouterModule=RouterModule,exports.provideRoutes=provideRoutes,exports.RouterOutletMap=RouterOutletMap,exports.NoPreloading=NoPreloading,exports.PreloadAllModules=PreloadAllModules,exports.PreloadingStrategy=PreloadingStrategy,exports.RouterPreloader=RouterPreloader,exports.ActivatedRoute=ActivatedRoute,exports.ActivatedRouteSnapshot=ActivatedRouteSnapshot,exports.RouterState=RouterState,exports.RouterStateSnapshot=RouterStateSnapshot,exports.PRIMARY_OUTLET=PRIMARY_OUTLET,exports.UrlHandlingStrategy=UrlHandlingStrategy,exports.DefaultUrlSerializer=DefaultUrlSerializer,exports.UrlSegment=UrlSegment,exports.UrlSegmentGroup=UrlSegmentGroup,exports.UrlSerializer=UrlSerializer,exports.UrlTree=UrlTree,exports.VERSION=VERSION,exports.ɵROUTER_PROVIDERS=ROUTER_PROVIDERS,exports.ɵflatten=flatten,exports.ɵa=ROUTER_FORROOT_GUARD,exports.ɵg=initialRouterNavigation,exports.ɵd=provideForRootGuard,exports.ɵc=provideLocationStrategy,exports.ɵh=provideRouterInitializer,exports.ɵf=rootRoute,exports.ɵb=routerNgProbeToken,exports.ɵe=setupRouter,exports.ɵi=Tree,exports.ɵj=TreeNode});